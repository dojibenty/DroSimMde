/*
 * DroneSweep.h
 *
 * Generated by Cares generator, written with Acceleo
 * Author: pyp
 */
#ifndef DroneSweep_H_
#define DroneSweep_H_
#include "ReturnCode.h"
class compDroneSweep;
// Inputs
#include "vect2.h"

#include "ItfGeoDataInterface.h"
#include "wect2.h"
#include "ItfManageSimInterface.h"
#include "ItfSimDataInterface.h"

// Start of user code  : Additional imports for DroneSweep
#define CONSUMPTION(speed,weight) (1.0/2.0*(weight)*pow(speed,2.0))
// End of user code

class DroneSweep {
protected :
    compDroneSweep* myContainer;

    // Inputs
    vect2 objposition;
    double windForce;
    vect2 windDirection;
    // Outputs
    vect2 sweepposition;
    // Parameters
    double minSpeed;
    double maxSpeed;
    double visionRadius;
    double sweepHeight;
    double batteryCapacity;
    long numberOf;
    vect2 startingPoint;
    double collisionRadius;

    // Required Interfaces
    ItfGeoDataInterface* rItfGeoDataSweep;
    ItfManageSimInterface* rItfManageSimSweep;
    ItfSimDataInterface* rItfSimDataSweep;

    // Status
    bool status;

    // Start of user code  : Properties of DroneSweep
private:
    int droneID;
    double speed;
    vect2 position;
    vect2 direction;
    double batteryConsumption;
    double battery;
    double movementTolerance;
    wect2 assignedZone;
    bool goesVertical = true;
    bool leftToRight = false;
    bool topToBottom = false;
    long heightCount = 1;
    double sweepLength;
    double leftYBound;
    bool isInZone = false;
    vect2 zoneStartPoint;
    double windInfluence = 0.6;
    double weight = 15.0;
    int cpt = 0;
    // End of user code

public :
    DroneSweep(compDroneSweep* container, int ID);
    ~DroneSweep();
    void initialize();
    void end();

    ReturnCode doStep(int nStep);
    bool condReturnObjectiveFound();
    bool condReturnLowBattery();


    // Start of user code  : Additional methods
private:
    vect2 setNextPosition();
    bool goesOutOfBounds(vect2& point);

public:
    void setAssignedZone(wect2 zone);
    void printRecap();
    double getSpeed() { return speed; }
    void setSpeed(double arg) { speed = arg; }
    int getDroneID() { return droneID; }
    vect2& getPosition() { return position; }
    void setPosition(const vect2& arg) { position = arg; }
    bool getStatus() { return status; }
    void setStatus(bool arg) { status = arg; }
    // End of user code


    void setObjposition(vect2 arg);
    void setWindForce(double arg);
    void setWindDirection(vect2 arg);

    vect2 getSweepposition();
    ItfGeoDataInterface* getItfGeoDataInterface() { return rItfGeoDataSweep; }
    void setrItfGeoDataSweep(ItfGeoDataInterface* arItfGeoDataSweep);
    ItfManageSimInterface* getItfManageSimInterface() { return rItfManageSimSweep; }
    void setrItfManageSimSweep(ItfManageSimInterface* arItfManageSimSweep);
    ItfSimDataInterface* getItfSimDataInterface() { return rItfSimDataSweep; }
    void setrItfSimDataSweep(ItfSimDataInterface* arItfSimDataSweep);
    // +++++++++++++ Access for minSpeed parameter +++++++++++++
    double getMinSpeed();

    void setMinSpeed(double arg);
    // +++++++++++++ Access for minSpeed parameter +++++++++++++
    double getMaxSpeed();

    void setMaxSpeed(double arg);
    // +++++++++++++ Access for visionRadius parameter +++++++++++++
    double getVisionRadius();

    void setVisionRadius(double arg);
    // +++++++++++++ Access for sweepHeight parameter +++++++++++++
    double getSweepHeight();

    void setSweepHeight(double arg);
    // +++++++++++++ Access for batteryCapacity parameter +++++++++++++
    double getBatteryCapacity();

    void setBatteryCapacity(double arg);
    // +++++++++++++ Access for numberOf parameter +++++++++++++
    long getNumberOf();

    void setNumberOf(long arg);
    // +++++++++++++ Access for startingPoint parameter +++++++++++++
    vect2 getStartingPoint();

    void setStartingPoint(vect2 arg);
    // +++++++++++++ Access for collisionRadius parameter +++++++++++++
    double getCollisionRadius();

    void setCollisionRadius(double arg);
};
#endif /*  DroneSweep_H_ */
